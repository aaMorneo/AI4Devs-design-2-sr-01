# LTI - Resumen del Producto

## Descripci√≥n General

**LTI** (Let's Track Intelligence) es una plataforma SaaS de nueva generaci√≥n para la gesti√≥n del ciclo completo de atracci√≥n y selecci√≥n de talento. Nace con el objetivo de redise√±ar desde cero el concepto tradicional de ATS (Applicant Tracking System), integrando capacidades colaborativas en tiempo real y asistencia inteligente basada en IA para potenciar la toma de decisiones en reclutamiento.

## Propuesta de Valor

LTI permite a equipos de Recursos Humanos:

- Centralizar vacantes, candidatos y procesos en una sola interfaz.
- Colaborar en tiempo real con hiring managers, reclutadores y stakeholders.
- Automatizar tareas repetitivas como screening inicial, comunicaci√≥n y seguimiento.
- Acceder a sugerencias de IA para optimizar decisiones y reducir tiempos de contrataci√≥n.
- Aumentar la transparencia del pipeline y m√©tricas con dashboards accionables.

## Ventajas Competitivas

| Caracter√≠stica                    | LTI | ATS Tradicionales |
|----------------------------------|-----|--------------------|
| Colaboraci√≥n en tiempo real      | ‚úÖ  | ‚ùå                  |
| IA para screening y sugerencias  | ‚úÖ  | ‚ùå Parcial          |
| Experiencia moderna y UX fluida  | ‚úÖ  | ‚ùå                  |
| Personalizaci√≥n por equipo       | ‚úÖ  | ‚ùå Limitada         |
| Integraciones abiertas por API   | ‚úÖ  | ‚ùå Parcial          |

## Lean Canvas
### üìä Lean Canvas [Lean Canvas](./diagramas/lean%20canvas.png)

<mxGraphModel dx="1480" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827">
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>

    <!-- Fila superior -->
    <mxCell id="2" value="üîß Problema&#xa;- Volumen de candidatos&#xa;- Screening manual&#xa;- Baja calidad" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#ffe6e6;strokeColor=#d60000;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="20" y="20" width="160" height="150" as="geometry"/>
    </mxCell>

    <mxCell id="3" value="üéØ Segmentos Cliente&#xa;- Startups sin RRHH&#xa;- Equipos saturados" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#e6f0ff;strokeColor=#005ce6;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="190" y="20" width="160" height="150" as="geometry"/>
    </mxCell>

    <mxCell id="4" value="üöÄ Propuesta √önica&#xa;ATS con IA que automatiza y mejora calidad de selecci√≥n" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#fff4cc;strokeColor=#b38f00;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="360" y="20" width="200" height="150" as="geometry"/>
    </mxCell>

    <mxCell id="5" value="üí° Soluci√≥n&#xa;- IA CVs&#xa;- Chatbot entrevistas&#xa;- Ranking inteligente" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#e6ffe6;strokeColor=#00a000;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="570" y="20" width="160" height="150" as="geometry"/>
    </mxCell>

    <mxCell id="6" value="üèÜ Ventaja Injusta&#xa;- Algoritmos IA propios&#xa;- Dataset exclusivo" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#f2f2f2;strokeColor=#808080;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="740" y="20" width="160" height="150" as="geometry"/>
    </mxCell>

    <!-- Fila media -->
    <mxCell id="7" value="üìå Alternativas Existentes&#xa;- Excel/email&#xa;- Notion&#xa;- ATS antiguos" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#f0f8ff;strokeColor=#4682b4;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="20" y="180" width="160" height="130" as="geometry"/>
    </mxCell>

    <mxCell id="8" value="üìä M√©tricas Clave&#xa;- Clientes activos&#xa;- Candidatos procesados&#xa;- Retenci√≥n" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#f0fff0;strokeColor=#008000;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="190" y="180" width="160" height="130" as="geometry"/>
    </mxCell>

    <mxCell id="9" value="üåê Concepto General&#xa;Plataforma de automatizaci√≥n con IA para reclutamiento" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#fdf5e6;strokeColor=#e6ac00;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="360" y="180" width="200" height="130" as="geometry"/>
    </mxCell>

    <mxCell id="10" value="üì¢ Canales&#xa;- Ventas directas&#xa;- Marketing digital&#xa;- Referidos" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#e0f7fa;strokeColor=#007c91;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="570" y="180" width="160" height="130" as="geometry"/>
    </mxCell>

    <mxCell id="11" value="üë• Primeros Adoptantes&#xa;- Empresas contratando&#xa;- Reclutadores con sobrecarga" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#f3e5f5;strokeColor=#8e24aa;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="740" y="180" width="160" height="130" as="geometry"/>
    </mxCell>

    <!-- Fila inferior -->
    <mxCell id="12" value="üí∞ Estructura de Costos&#xa;- Infraestructura cloud&#xa;- Dev IA&#xa;- Soporte/Marketing" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#fbe9e7;strokeColor=#d84315;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="190" y="330" width="280" height="110" as="geometry"/>
    </mxCell>

    <mxCell id="13" value="üìà Fuentes de Ingresos&#xa;- Suscripci√≥n mensual&#xa;- Pago por uso&#xa;- Servicios premium" style="shape=swimlane;whiteSpace=wrap;rounded=1;fillColor=#e8f5e9;strokeColor=#2e7d32;verticalAlign=top;spacingTop=12;" vertex="1" parent="1">
      <mxGeometry x="480" y="330" width="280" height="110" as="geometry"/>
    </mxCell>
  </root>
</mxGraphModel>   

# Caso de Uso 1 ‚Äì Publicaci√≥n y Gesti√≥n de Vacantes

## Descripci√≥n

Los reclutadores pueden crear, editar y publicar vacantes en m√∫ltiples canales desde una √∫nica interfaz centralizada. La plataforma permite controlar la visibilidad de la vacante, gestionar su estado (abierta, en pausa, cerrada) y recibir aplicaciones directamente dentro del sistema LTI.

## Actores

- **Reclutador:** Crea y gestiona vacantes.
- **Hiring Manager:** Puede revisar los detalles de la vacante antes de su publicaci√≥n.
- **Sistema de Publicaci√≥n Externa:** Plataformas como LinkedIn, Indeed o portales de empleo corporativos.

## Flujo Principal

1. El reclutador accede al m√≥dulo de creaci√≥n de vacantes.
2. Ingresa informaci√≥n como t√≠tulo, descripci√≥n, requisitos y beneficios.
3. Selecciona los canales de publicaci√≥n deseados.
4. El sistema publica autom√°ticamente en las plataformas externas.
5. Los candidatos aplican desde los canales externos.
6. Las aplicaciones se centralizan autom√°ticamente en LTI para su seguimiento.

## Diagrama de Flujo
### üìä Caso de Uso 1 [Publicaci√≥n y Gesti√≥n de Vacantes](./diagramas/1_caso_uso.png)

@startuml Caso de Uso 1 - Publicaci√≥n y Gesti√≥n de Vacantes (Profundizado)

actor "Reclutador" as R
actor "Hiring Manager" as HM
participant "Sistema LTI" as LTI
participant "Canales Externos" as CE
actor "Candidatos" as C

R -> LTI: Accede al m√≥dulo de vacantes
R -> LTI: Crea nueva vacante
note right: T√≠tulo, descripci√≥n, requisitos, beneficios

R -> HM: Solicita revisi√≥n de vacante
HM -> R: Aprueba o solicita cambios

alt Aprobada
    R -> LTI: Selecciona canales de publicaci√≥n
    LTI -> CE: Publica autom√°ticamente
    note right: LinkedIn, Indeed, portales corporativos
    
    C -> CE: Aplica desde canales externos
    CE -> LTI: Centraliza aplicaciones
    LTI -> R: Notifica nuevas aplicaciones
    R -> LTI: Gestiona aplicaciones recibidas
else Rechazada
    R -> LTI: Edita vacante seg√∫n feedback
    R -> HM: Reenv√≠a para aprobaci√≥n
end

@enduml

# Caso de Uso 2 ‚Äì Evaluaci√≥n Colaborativa de Candidatos

## Descripci√≥n

LTI permite que reclutadores y hiring managers colaboren en tiempo real durante la evaluaci√≥n de candidatos. A trav√©s de la plataforma, pueden intercambiar comentarios, calificaciones y observaciones directamente sobre el perfil del candidato, reduciendo la fricci√≥n y mejorando la toma de decisiones conjunta.

## Actores

- **Reclutador:** Filtra, organiza y comparte candidatos.
- **Hiring Manager:** Participa activamente en la evaluaci√≥n de perfiles relevantes.
- **Sistema LTI:** Orquesta la interacci√≥n y registra todas las acciones colaborativas.

## Flujo Principal

1. El reclutador revisa nuevas aplicaciones recibidas desde canales externos.
2. Identifica candidatos potenciales y comparte sus perfiles dentro de LTI.
3. El hiring manager accede a los perfiles compartidos y deja comentarios, notas o puntuaciones.
4. El reclutador y el manager visualizan mutuamente sus aportes.
5. Se decide de manera colaborativa si el candidato avanza en el proceso o es descartado.

## Diagrama de Flujo
### üìä Caso de Uso 2 [Evaluaci√≥n Colaborativa de Candidatos](./diagramas/2_caso_uso.png)

@startuml Caso de Uso 2 - Evaluaci√≥n Colaborativa (Profundizado)

actor "Reclutador" as R
actor "Hiring Manager" as HM
participant "Sistema LTI" as LTI
participant "Base de Candidatos" as BC

R -> LTI: Revisa nuevas aplicaciones
LTI -> R: Muestra lista de candidatos

R -> LTI: Filtra candidatos potenciales
R -> LTI: Comparte perfiles con HM
LTI -> HM: Notifica perfiles compartidos

HM -> LTI: Accede a perfiles compartidos
HM -> LTI: Agrega comentarios y puntuaciones
note right: Comentarios abiertos, calificaciones 1-5

R -> LTI: Visualiza aportes del HM
HM -> LTI: Visualiza aportes del reclutador

alt Decisi√≥n conjunta positiva
    R -> LTI: Avanza candidato en pipeline
    LTI -> BC: Actualiza estado del candidato
    LTI -> R: Notifica cambio de estado
    LTI -> HM: Notifica cambio de estado
else Decisi√≥n conjunta negativa
    R -> LTI: Rechaza candidato
    LTI -> BC: Actualiza estado del candidato
    LTI -> R: Notifica rechazo
    LTI -> HM: Notifica rechazo
end

@enduml

# Caso de Uso 3 ‚Äì Automatizaci√≥n del Screening con IA

## Descripci√≥n

LTI incorpora un m√≥dulo de inteligencia artificial que analiza las aplicaciones recibidas y las eval√∫a autom√°ticamente seg√∫n criterios definidos por el equipo de reclutamiento. Esto permite reducir el tiempo dedicado al filtrado inicial de candidatos y enfocar el trabajo humano en las mejores oportunidades.

## Actores

- **Sistema de IA:** Procesa perfiles y aplica criterios de evaluaci√≥n.
- **Reclutador:** Supervisa, valida y act√∫a en base a los resultados de IA.
- **Base de Candidatos:** Fuente din√°mica de perfiles entrantes al sistema.

## Flujo Principal

1. El sistema de IA recibe nuevos perfiles desde fuentes internas y externas.
2. Se procesan los CVs y perfiles mediante t√©cnicas de NLP y an√°lisis sem√°ntico.
3. La IA asigna una puntuaci√≥n a cada candidato seg√∫n criterios como skills, experiencia, compatibilidad cultural y seniority.
4. Se genera una lista priorizada para revisi√≥n del reclutador.
5. El reclutador toma acci√≥n (avanzar, contactar, descartar).

## Diagrama de Flujo
### üìä Caso de Uso 3 [Automatizaci√≥n del Screening con IA](./diagramas/3_caso_uso.png)

@startuml Caso de Uso 3 - Screening con IA (Profundizado)

participant "Sistema de IA" as AI
participant "Base de Datos" as DB
actor "Reclutador" as R
participant "Sistema LTI" as LTI

AI -> DB: Recibe nuevos perfiles
note right: Desde fuentes internas y externas

AI -> AI: Procesa CVs con NLP
note right: An√°lisis sem√°ntico, extracci√≥n de skills

AI -> AI: Aplica criterios de evaluaci√≥n
note right: Skills, experiencia, compatibilidad cultural, seniority

AI -> AI: Asigna puntuaci√≥n a cada candidato
note right: Algoritmo de scoring personalizado

AI -> LTI: Genera lista priorizada
LTI -> R: Muestra candidatos ordenados por puntuaci√≥n

R -> LTI: Revisa resultados de IA
R -> LTI: Valida o ajusta puntuaciones

alt Candidato aprobado
    R -> LTI: Avanza candidato
    LTI -> DB: Actualiza estado
    LTI -> R: Notifica acci√≥n tomada
else Candidato rechazado
    R -> LTI: Rechaza candidato
    LTI -> DB: Actualiza estado
    LTI -> R: Notifica acci√≥n tomada
else Requiere revisi√≥n manual
    R -> LTI: Marca para revisi√≥n manual
    LTI -> DB: Actualiza estado
    LTI -> R: Notifica acci√≥n tomada
end

@enduml

# Modelo de Datos ‚Äì LTI ATS

## Visi√≥n General

El modelo de datos de LTI est√° dise√±ado para soportar un flujo moderno y eficiente de reclutamiento colaborativo con automatizaci√≥n basada en IA. Incluye entidades clave que representan usuarios, vacantes, candidatos, evaluaciones y automatizaciones.

## Entidades Principales y Atributos

### 1. Usuario (`User`)
- `id`: UUID
- `nombre`: string
- `email`: string
- `rol`: enum (`reclutador`, `manager`, `admin`)
- `equipo_id`: UUID (FK)

### 2. Vacante (`Job`)
- `id`: UUID
- `titulo`: string
- `descripcion`: text
- `estado`: enum (`abierta`, `cerrada`, `pausada`)
- `ubicacion`: string
- `fecha_creacion`: datetime
- `creador_id`: UUID (FK ‚Üí Usuario)

### 3. Candidato (`Candidate`)
- `id`: UUID
- `nombre`: string
- `email`: string
- `cv_url`: string
- `estado_pipeline`: enum (`nuevo`, `en evaluaci√≥n`, `entrevista`, `oferta`, `descartado`)
- `fecha_aplicacion`: datetime

### 4. Postulaci√≥n (`Application`)
- `id`: UUID
- `vacante_id`: UUID (FK)
- `candidato_id`: UUID (FK)
- `fuente`: enum (`linkedin`, `referido`, `sitio web`)
- `puntaje_ia`: float
- `fecha_postulacion`: datetime

### 5. Evaluaci√≥n (`Evaluation`)
- `id`: UUID
- `evaluador_id`: UUID (FK ‚Üí Usuario)
- `candidato_id`: UUID (FK)
- `vacante_id`: UUID (FK)
- `comentarios`: text
- `calificacion`: integer (1‚Äì5)
- `fecha`: datetime

### 6. Equipo (`Team`)
- `id`: UUID
- `nombre`: string
- `descripcion`: string

---

## Diagrama de Entidades y Relaciones
### üìä Entidad Relacion [Entidad Relacion](./diagramas/entidad_relacion.png)

```mermaid
erDiagram
    User ||--o{ Job : crea
    User ||--o{ Evaluation : realiza
    User }o--o{ Team : pertenece_a
    Job ||--o{ Application : recibe
    Candidate ||--o{ Application : genera
    Candidate ||--o{ Evaluation : recibe
    Application ||--|| Job : para
    Application ||--|| Candidate : de
    Evaluation ||--|| Candidate : evalua
    Evaluation ||--|| Job : sobre
    Team ||--o{ User : tiene
```

# Dise√±o del Sistema a Alto Nivel ‚Äì LTI ATS

## Objetivo

Dise√±ar una arquitectura SaaS moderna para LTI que permita:

- Escalabilidad y modularidad
- Colaboraci√≥n en tiempo real entre usuarios
- Integraci√≥n con motores de IA y sistemas externos
- Seguridad y auditor√≠a de operaciones
- API-first para integraci√≥n con ecosistemas externos (Slack, LinkedIn, CRMs, etc.)

---

## Componentes Principales

- **Frontend Web (SPA):** React + Tailwind
- **API Gateway / BFF:** Capa de entrada centralizada
- **Backend de Servicios:** Vacantes, Candidatos, Evaluaciones, IA, Notificaciones, Auditor√≠a
- **Motor de IA:** Screening automatizado, puntuaci√≥n y recomendaciones
- **Base de Datos:** PostgreSQL, Redis, Almacenamiento de documentos
- **Capa en tiempo real:** WebSockets para colaboraci√≥n live
- **Integraciones externas:** LinkedIn, Slack, Calendarios
- **Seguridad:** JWT/OAuth2, control de acceso granular y trazabilidad

---

## Diagrama de Arquitectura General
### üìä Alto Nivel [Alto Nivel](./diagramas/alto_nivel.png)

@startuml LTI-Architecture-High-Level

!define RECTANGLE class

package "Frontend Layer" {
    [React SPA] as Frontend
}

package "API Gateway Layer" {
    [API Gateway / BFF] as Gateway
    [Load Balancer] as LB
}

package "Business Services Layer" {
    [Servicio de Vacantes] as Jobs
    [Servicio de Candidatos] as Candidates
    [Servicio de Evaluaciones] as Evaluations
    [Servicio de Usuarios] as Users
    [Servicio de Equipos] as Teams
    [Motor de IA / Screening] as AI
    [Servicio de Notificaciones] as Notifications
    [Servicio de Auditor√≠a] as Audit
}

package "Data Layer" {
    database "PostgreSQL" as DB
    database "Redis Cache" as Cache
    database "File Storage" as Storage
}

package "Real-time Layer" {
    [WebSocket Server] as WS
}

package "External Integrations" {
    [LinkedIn API] as LinkedIn
    [Google Calendar] as Calendar
    [Slack / Email] as Communication
}

package "Infrastructure" {
    [Message Broker] as Broker
    [Monitoring] as Monitor
    [Security] as Security
}

' Conexiones principales
Frontend --> LB
LB --> Gateway
Gateway --> Jobs
Gateway --> Candidates
Gateway --> Evaluations
Gateway --> Users
Gateway --> Teams
Gateway --> AI
Gateway --> Notifications
Gateway --> Audit

' Conexiones a base de datos
Jobs --> DB
Candidates --> DB
Evaluations --> DB
Users --> DB
Teams --> DB
AI --> DB
AI --> Storage
Audit --> DB
Notifications --> Cache

' Tiempo real
Frontend --> WS
Candidates --> WS
Evaluations --> WS

' Integraciones externas
Jobs --> LinkedIn
Notifications --> Calendar
Notifications --> Communication

' Infraestructura
Jobs --> Broker
Candidates --> Broker
Evaluations --> Broker
AI --> Broker

@enduml

# Profundizaci√≥n T√©cnica ‚Äì Servicio de Evaluaciones (C4 Nivel 3)

## Contexto

El Servicio de Evaluaciones es responsable de manejar la l√≥gica de calificaci√≥n, comentarios y seguimiento sobre los candidatos postulados a una vacante. Es clave para la colaboraci√≥n entre reclutadores y hiring managers, ya que permite almacenar y consultar observaciones, puntajes y retroalimentaci√≥n en tiempo real.

Este componente expone endpoints y eventos que interact√∫an con otros servicios como Candidatos, Vacantes, Usuarios y el m√≥dulo de Auditor√≠a.

---

## Funciones Principales del Servicio

- Registrar evaluaciones sobre un candidato en una vacante
- Permitir m√∫ltiples evaluadores por candidato
- Soportar comentarios abiertos y puntuaciones cuantitativas
- Versionar cambios o ediciones en la evaluaci√≥n
- Exponer API REST/GraphQL para UI y otros servicios
- Emitir eventos (`evaluation.created`, `evaluation.updated`)
- Sincronizar con el sistema de auditor√≠a


## Diagrama C4 ‚Äì Nivel 1: Contexto del Sistema
### üìä Nivel 1 [Contexto del Sistema](./diagramas/c4_nivel_1.png)
@startuml LTI-C4-Level1-Context

!define RECTANGLE class

title LTI - Diagrama de Contexto del Sistema (C4 Nivel 1)

package "LTI - Let's Track Intelligence" {
    [LTI ATS Platform] as LTI
}

actor "Reclutador" as Recruiter
actor "Hiring Manager" as Manager
actor "Candidato" as Candidate

package "Sistemas Externos" {
    [LinkedIn] as LinkedIn
    [Indeed] as Indeed
    [Google Calendar] as Calendar
    [Slack] as Slack
    [Email System] as Email
}

Recruiter --> LTI : Gestiona vacantes y candidatos
Manager --> LTI : Eval√∫a candidatos colaborativamente
Candidate --> LTI : Aplica a vacantes

LTI --> LinkedIn : Publica vacantes
LTI --> Indeed : Publica vacantes
LTI --> Calendar : Programa entrevistas
LTI --> Slack : Notificaciones
LTI --> Email : Comunicaciones

@enduml
flowchart TB
    subgraph Servicio de Evaluaciones
        A1[EvaluationController] --> A2[EvaluationService]
        A2 --> A3[EvaluationRepository]
        A2 --> A4[EvaluationScoringEngine]
        A2 --> A5[CommentSanitizer]
        A2 --> A6[AuditEventEmitter]
    end

    subgraph Externos
        B1[Frontend Web React SPA]
        B2[Servicio de Vacantes]
        B3[Servicio de Candidatos]
        B4[Servicio de Auditor√≠a]
    end

    B1 --> A1
    A3 --> B3
    A3 --> B2
    A6 --> B4

## Diagrama C4 ‚Äì Nivel 2: Contenedores del Sistema
### üìä Nivel 2 [Contenedores del Sistema](./diagramas/c4_nivel_2.png)
@startuml LTI-C4-Level2-Containers

!define RECTANGLE class

title LTI - Diagrama de Contenedores (C4 Nivel 2)

package "LTI ATS Platform" {
    [React SPA] as Frontend
    note right of Frontend : React + Tailwind\nProporciona funcionalidades de UI\npara gesti√≥n de vacantes y candidatos
    
    [API Gateway] as Gateway
    note right of Gateway : BFF (Backend for Frontend)\nManeja autenticaci√≥n y routing
    
    [Servicio de Vacantes] as Jobs
    note right of Jobs : Gestiona creaci√≥n, publicaci√≥n\ny seguimiento de vacantes
    
    [Servicio de Candidatos] as Candidates
    note right of Candidates : Maneja perfiles, aplicaciones\ny pipeline de candidatos
    
    [Servicio de Evaluaciones] as Evaluations
    note right of Evaluations : Colaboraci√≥n en tiempo real\nentre reclutadores y managers
    
    [Motor de IA] as AI
    note right of AI : Screening automatizado\ny puntuaci√≥n de candidatos
    
    [Servicio de Notificaciones] as Notifications
    note right of Notifications : Env√≠o de notificaciones\npor m√∫ltiples canales
    
    [Base de Datos] as Database
    note right of Database : PostgreSQL\nAlmacena datos principales
    
    [Cache] as Cache
    note right of Cache : Redis\nSesiones y datos temporales
    
    [WebSocket Server] as WS
    note right of WS : Comunicaci√≥n en tiempo real\npara colaboraci√≥n
}

actor "Reclutador" as Recruiter
actor "Hiring Manager" as Manager

package "Sistemas Externos" {
    [LinkedIn API] as LinkedIn
    [Google Calendar] as Calendar
    [Slack API] as Slack
}

' Conexiones principales
Recruiter --> Frontend : Usa
Manager --> Frontend : Usa

Frontend --> Gateway : API calls
Frontend --> WS : WebSocket

Gateway --> Jobs : HTTP/JSON
Gateway --> Candidates : HTTP/JSON
Gateway --> Evaluations : HTTP/JSON
Gateway --> AI : HTTP/JSON
Gateway --> Notifications : HTTP/JSON

Jobs --> Database : SQL
Candidates --> Database : SQL
Evaluations --> Database : SQL
AI --> Database : SQL
Notifications --> Cache : Redis

Jobs --> LinkedIn : REST API
Notifications --> Calendar : REST API
Notifications --> Slack : REST API

@enduml

## Diagrama C4 ‚Äì Nivel 3: Componentes del Servicio de Evaluaciones
### üìä Nivel 3 [Componentes del Servicio de Evaluaciones](./diagramas/c4_nivel_3.png)

@startuml LTI-C4-Level3-Evaluations

!define RECTANGLE class

title LTI - Servicio de Evaluaciones - Componentes (C4 Nivel 3)

package "Servicio de Evaluaciones" {
    [EvaluationController] as Controller
    note right of Controller : REST API endpoints\nValidaci√≥n de entrada
    
    [EvaluationService] as Service
    note right of Service : L√≥gica de negocio\nOrquestaci√≥n de operaciones
    
    [EvaluationRepository] as Repository
    note right of Repository : Acceso a datos\nCRUD operations
    
    [EvaluationScoringEngine] as Scoring
    note right of Scoring : C√°lculo de puntuaciones\ny m√©tricas
    
    [CommentSanitizer] as Sanitizer
    note right of Sanitizer : Limpieza y validaci√≥n\nde comentarios
    
    [AuditEventEmitter] as Audit
    note right of Audit : Emisi√≥n de eventos\nde auditor√≠a
    
    [RealTimeNotifier] as RTNotifier
    note right of RTNotifier : Notificaciones\nen tiempo real
}

package "Sistemas Externos" {
    [Frontend Web] as Frontend
    [Servicio de Vacantes] as Jobs
    [Servicio de Candidatos] as Candidates
    [Servicio de Auditor√≠a] as AuditService
    [WebSocket Server] as WS
    [Base de Datos] as DB
}

' Conexiones internas
Controller --> Service : calls
Service --> Repository : data access
Service --> Scoring : calculate scores
Service --> Sanitizer : validate comments
Service --> Audit : emit events
Service --> RTNotifier : notify changes

' Conexiones externas
Frontend --> Controller : HTTP requests
Repository --> DB : SQL queries
Audit --> AuditService : events
RTNotifier --> WS : real-time updates

' Dependencias de datos
Repository --> Jobs : candidate/job validation
Repository --> Candidates : candidate data

@enduml

## Diagrama C4 ‚Äì Nivel 4: C√≥digo del Componente EvaluationService
### üìä Nivel 4 [C√≥digo del Componente EvaluationService](./diagramas/c4_nivel_4.png)

@startuml LTI-C4-Level4-EvaluationService

!define RECTANGLE class

title LTI - EvaluationService - C√≥digo (C4 Nivel 4)

package "EvaluationService" {
    class EvaluationService {
        +createEvaluation(evaluation: CreateEvaluationDto): Evaluation
        +updateEvaluation(id: UUID, updates: UpdateEvaluationDto): Evaluation
        +getEvaluationsByCandidate(candidateId: UUID): List<Evaluation>
        +getEvaluationsByJob(jobId: UUID): List<Evaluation>
        +calculateAverageScore(candidateId: UUID, jobId: UUID): float
        +notifyCollaborators(evaluation: Evaluation): void
    }
    
    class Evaluation {
        +id: UUID
        +evaluatorId: UUID
        +candidateId: UUID
        +jobId: UUID
        +comments: string
        +score: int
        +createdAt: DateTime
        +updatedAt: DateTime
    }
    
    class CreateEvaluationDto {
        +evaluatorId: UUID
        +candidateId: UUID
        +jobId: UUID
        +comments: string
        +score: int
    }
    
    class UpdateEvaluationDto {
        +comments?: string
        +score?: int
    }
    
    class EvaluationRepository {
        +save(evaluation: Evaluation): Evaluation
        +findById(id: UUID): Optional<Evaluation>
        +findByCandidateAndJob(candidateId: UUID, jobId: UUID): List<Evaluation>
        +update(id: UUID, evaluation: Evaluation): Evaluation
        +delete(id: UUID): void
    }
    
    class AuditEventEmitter {
        +emitEvaluationCreated(evaluation: Evaluation): void
        +emitEvaluationUpdated(evaluation: Evaluation): void
        +emitEvaluationDeleted(evaluationId: UUID): void
    }
}

package "Dependencias" {
    interface IEvaluationRepository
    interface IAuditEventEmitter
    interface IRealTimeNotifier
}

EvaluationService --> IEvaluationRepository : uses
EvaluationService --> IAuditEventEmitter : uses
EvaluationService --> IRealTimeNotifier : uses

EvaluationRepository ..|> IEvaluationRepository : implements
AuditEventEmitter ..|> IAuditEventEmitter : implements

@enduml